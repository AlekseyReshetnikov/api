Кластеры в поиске вакансий
==========================

Часто в поиске вакансий удобно получать расширенную информацию о том, как резделены вакансии в поиске по различным критериям.
Например, при поиске по выбранным критериям, удобно знать каким образом распределены зарплаты в искомых вакансиях - в скольких вакансиях зарплата указана, в скольких она больше определенной суммы.
Эти данные возможно получить пользуясь поиском вакансий, формируя отдельный запрос на каждый интересующий критерий. Однако значительно проще воспользоваться специальной возможностью поисковой выдачи - разбиения данных на кластеры.

Пример использования этих данных на основном сайте hh.ru можно увидеть в левой колонке на [странице результатов поиска вакансий](https://hh.ru/search/vacancy).

Если необходима только данная мета-информация (а не сам список найденных вакансий) можно указать в запросе `?per_page=0`.

Для того, чтобы получить данные по кластерам, необходимо в поисковом запросе на ```/vacancies``` добавить параметр ```clusters=true```. При этом в поисковом ответе помимо поисковой выдачи будет возвращаться дополнительная разбивка вакансий по кластерам:

```json
{
  "items": [],
  "found": 306158,
  "pages": 2000,
  "per_page": 1,
  "page": 0,
  "clusters": [
    {
      "id": "professional_area",
      "name": "Профобласть",
      "items": [
        {
          "name": "Спортивные клубы, фитнес, салоны красоты",
          "url": "https://api.hh.ru/vacancies?clusters=true&specialization=24&per_page=1",
          "count": 2852
        },
        {
          "name": "Инсталляция и сервис",
          "count": 2469,
          "url": "https://api.hh.ru/vacancies?clusters=true&specialization=25&per_page=1"
        }
      ]
    }
  ]
}
```

Набор типов объектов кластеров (```id``` в элементах массива ```clusters```) может отличаться от запроса к запросу и зависит от параметров поискового запроса.
Список всех типов кластеров можно узнать в [справочнике](dictionaries.md) в элементе с ключем ```vacancy_cluster```.

При этом, если в поисковом запросе было указано ```clusters=false``` или параметр ```clusters``` вообще не был указан, то поле ```clusters``` в  ответе будет ```null```.

Каждый кластер имеет следующие поля:

 Имя | Тип | Значение
 --- | --- | ---
 id | строка | Тип кластера
 name | строка | Название типа кластера
 items | массив | Массив поисковых запросов в данном кластере с указанием дополнительных параметров

Каждый элемент массива ```items``` представляет из себя объект со следующими полями:

 Имя | Тип | Значение
 --- | --- | ---
 name | строка | Название элемента кластера
 url | строка | Ссылка на поисковую выдачу по данному элементу кластера
 count | число | Количество вакансий в данном элементе кластера
